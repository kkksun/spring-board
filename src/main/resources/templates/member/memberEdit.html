<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link th:href="@{/css/boardStyle.css}"
          href="../css/boardStyle.css" rel="stylesheet">

    <script th:inline="javascript">

        document.addEventListener("DOMContentLoaded", function (){
            const pwChange = [[${memberInfo.pwChange}]]

            if (pwChange) {
                document.getElementById("password").style.display = "inline-block";
                document.getElementById("pwChange").checked = true;
                document.getElementById("pwChangeBtn").innerText = "취소";
            }

        });
        const passwordChange = () => {

            if(document.getElementById("password").style.display === "none") {
                document.getElementById("password").style.display = "inline-block";
                document.getElementById("pwChange").checked = true;
                document.getElementById("pwChangeBtn").innerText = "취소";

            } else {
                document.getElementById("password").style.display = "none";
                document.getElementById("pwChange").checked = false;
                document.getElementById("pwChangeBtn").innerText = "변경";
            }
        }

        const attrChange = () => {
            document.getElementById("password").style.display = "hidden";
            if(!document.getElementById("pwChange").checked) {
                document.getElementById("password").value = [[${memberInfo.password}]];
            }
        }

    </script>
</head>
<body>
    <div class="container">
        <div th:replace="~{fragment/topFrag :: topTitle ('회원 수정')}"></div>
        <div th:replace="~{fragment/topFrag :: menu ('NONE')}"></div><br>
    <div class="editMemberForm">
        <form class="editMember" th:object="${memberInfo}" th:action method="post">
            <div>
                <label class="col">아이디</label>
                <input class="loginId" th:field="*{loginId}" readonly>
            </div>
            <div>
                <label class="col">비밀번호</label>
                <input type="password" class="password" id="password" th:field="*{password}" style="display: none">
                <button class="pwChangeBtn"  id="pwChangeBtn" th:type="button" th:onclick="passwordChange()">변경</button>
                <input type="checkbox" class="pwChange" id="pwChange" th:field="*{pwChange}" th:value="*{pwChange.booleanValue()}"  style="display: none" >
                <div class="field-error"  th:errors="*{password}"></div>
            </div>
            <div>
                <label class="col">이름</label>
                <input class="userName" th:field="*{userName}">
                <div class="field-error"  th:errors="*{userName}"></div>
            </div>
            <div>
                <label class="col">이메일</label>
                <input class="email" th:field="*{email}">
                <div class="field-error"  th:errors="*{email}"></div>
            </div>
            <div>
                <label class="col">유형</label>
                <input class="type" th:field="*{type}" readonly>
            </div>
            <div class="line"></div>
            <div class="row">
                <div class="btn">
                    <button class="btn_e" id="submit" type="submit" th:onclick="attrChange()" >수정</button>
                    <button class="btn_d" th:onclick="|location.href='@{/member/Info/{memberId}(memberId=${session.loginMember.id})}'|" type="button">취소</button>
                </div>
            </div>
        </form>
  </div>


</div>
</body>
</html>